{{ define "content" }}
<h2>All Orders (History)</h2>

{{ if .orders }}
<p>{{ len .orders }} total order(s) found</p>

<table>
    <thead>
    <tr>
        <th>ID</th>
        <th>External ID</th>
        <th>Side</th>
        <th>Price (USDC)</th>
        <th>Amount</th>
        <th>Status</th>
        <th>Position ID</th>
        <th>Created At</th>
        <th>Updated At</th>
    </tr>
    </thead>
    <tbody>
    {{ range .orders }}
    <tr style="
                {{ if eq .Status "FILLED" }}background-color: #d4edda;{{ end }}
    {{ if eq .Status "CANCELLED" }}background-color: #f8d7da;{{ end }}
    ">
    <td>{{ .ID }}</td>
    <td><code style="font-size: 0.8em;">{{ .ExternalID }}</code></td>
    <td>
                    <span style="
                        padding: 2px 6px;
                        border-radius: 3px;
                        font-size: 0.8em;
                        color: white;
                        background-color: {{ if eq .Side "BUY" }}#28a745{{ else }}#dc3545{{ end }};
        ">
        {{ .Side }}
        </span>
    </td>
    <td>{{ printf "%.2f" .Price }}</td>
    <td>{{ printf "%.6f" .Amount }}</td>
    <td>
                    <span style="
                        padding: 2px 6px;
                        border-radius: 3px;
                        font-size: 0.8em;
                        color: white;
                        background-color:
                            {{ if eq .Status "FILLED" }}#28a745{{ end }}
        {{ if eq .Status "CANCELLED" }}#dc3545{{ end }}
        {{ if eq .Status "PENDING" }}#ffc107{{ end }};
        ">
        {{ .Status }}
        </span>
    </td>
    <td>
        {{ if .PositionID }}
        <a href="/positions" style="color: #007bff;">{{ .PositionID }}</a>
        {{ else }}
        <em>N/A</em>
        {{ end }}
    </td>
    <td>{{ .CreatedAt.Format "2006-01-02 15:04:05" }}</td>
    <td>{{ .UpdatedAt.Format "2006-01-02 15:04:05" }}</td>
    </tr>
    {{ end }}
    </tbody>
</table>

<div style="margin-top: 1rem;">
    <h3>Legend:</h3>
    <ul>
        <li><span style="background-color: #d4edda; padding: 2px 6px; border-radius: 3px;">Green background</span> = Filled orders</li>
        <li><span style="background-color: #f8d7da; padding: 2px 6px; border-radius: 3px;">Red background</span> = Cancelled orders</li>
        <li>White background = Pending orders</li>
    </ul>
</div>

{{ else }}
<div style="text-align: center; padding: 2rem;">
    <p>No orders found in the database.</p>
</div>
{{ end }}

<div style="margin-top: 2rem;">
    <div class="nav-links">
        <a href="/orders">View Pending Only</a>
        <a href="/api/orders">View Raw JSON Data</a>
    </div>
</div>
{{ end }}
